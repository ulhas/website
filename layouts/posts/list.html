{{ define "main" }}
<content>
  <h1>{{ .Title }}</h1>
  
  <div class="posts-layout">
    <div class="posts-column">
      {{ $paginator := .Paginate (where .Pages "Type" "posts").ByDate.Reverse }}
      {{ range $paginator.Pages }}
      <article style="margin-bottom: 2.5em;">
        <h3 style="margin-bottom: 0.2em;"><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <div class="post-meta">
          <time datetime='{{ .Date.Format "2006-01-02" }}' style="font-size: 0.9em; color: #666;">
            {{ .Date.Format (default "02 Jan, 2006" .Site.Params.dateFormat) }}
          </time>
          {{ if .Params.tags }}
          <span class="tags">
            {{ range .Params.tags }}
            <a href="/tags/{{ . | urlize }}/" class="tag">#{{ . }}</a>
            {{ end }}
          </span>
          {{ end }}
        </div>
        {{ with .Description }}
        <p style="margin-top: 0.5em;">{{ . }}</p>
        {{ else }}
        <p style="margin-top: 0.5em;">{{ .Summary }}</p>
        {{ end }}
      </article>
      {{ else }}
      <p style="color: #666; font-style: italic;">No posts yet.</p>
      {{ end }}
      
      {{ if gt $paginator.TotalPages 1 }}
      <nav class="pagination">
        {{ if $paginator.HasPrev }}
          <a href="{{ $paginator.Prev.URL }}" class="pagination-prev">← Previous</a>
        {{ else }}
          <span class="pagination-prev disabled">← Previous</span>
        {{ end }}
        
        <span class="pagination-info">Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}</span>
        
        {{ if $paginator.HasNext }}
          <a href="{{ $paginator.Next.URL }}" class="pagination-next">Next →</a>
        {{ else }}
          <span class="pagination-next disabled">Next →</span>
        {{ end }}
      </nav>
      {{ end }}
    </div>
    
    <aside class="tags-sidebar">
      <h3>Tags</h3>
      <div class="sidebar-tags">
        {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
        <a href="/tags/{{ $name | urlize }}/" class="sidebar-tag">
          <span class="tag-name">#{{ $name }}</span>
          <span class="tag-count">({{ len $taxonomy }})</span>
        </a>
        {{ end }}
      </div>
    </aside>
  </div>
</content>
{{ end }}